const Discord = require('discord.js');
const client = new Discord.Client();
const ayarlar = require('./ayarlar.json');

var prefix = ayarlar.prefix

client.on('ready', () => {
  console.log(`Bot BaÅŸlatÄ±ldÄ±`);
  client.user.setActivity('Green Hell', { type: 'PLAYING' })
  .then(presence => console.log(`Durum ${presence.activities[0].name} oldu.`))
  .catch(console.error);
});

client.on('message', message => {
  if (message.content.startsWith('oylama')) {
    const args = message.content.split(' ').slice(1)
    const botmesajÄ± = args.join(" ")
    if (!message.member.hasPermission('ADMINISTRATOR')) return message.reply('**OYLAMA** Yapmak iÃ§in yÃ¶netici olmalÄ±sÄ±nÄ±z.');
    if (!botmesajÄ±) return message.reply('OylamanÄ±n ne olduÄŸunu yazmadÄ±n mal.');
    message.delete(message.author)
    const embed = new Discord.MessageEmbed()
    .setTitle('OYLAMA')
    .setDescription(botmesajÄ±)
    .setColor('RANDOM')
    .setFooter('By Vezir');
    message.channel.send({ embed: embed }).then( embedMessage => {
      embedMessage.react("âœ”ï¸")
      embedMessage.react("âŒ")
    })
  }
})

client.on('message', msg => {
  if (msg.content.toLowerCase() === 'sa') {
    msg.channel.send('AleykÃ¼m Selam, BebeÄŸim');
  }
});

client.on('message', msg => {
  if (msg.content.toLowerCase() === prefix + 'sahip') {
    msg.channel.send('<@836413920460931103>, Ä°nstagram** : vezir.mp4, **YouTube** : Vezir Edit, **TikTok** : vezirmp4');
  }
});

client.login(ayarlar.token);


 // Oynuyor KÄ±smÄ±
  
      var actvs = [
        `${prefix}yardÄ±m ${client.guilds.cache.size} sunucuyu`,
        `${prefix}yardÄ±m ${client.users.cache.size} KullanÄ±cÄ±yÄ±`, 
        `${prefix}yardÄ±m`
    ];
    
    client.user.setActivity('HAYALLERÄ°MLEğŸ¥€', { type: 'PLAYING' });
    
  
      console.log ('_________________________________________');
      console.log (`KullanÄ±cÄ± Ä°smi     : ${client.user.username}`);
      console.log (`Sunucular          : ${client.guilds.cache.size}`);
      console.log (`KullanÄ±cÄ±lar       : ${client.users.cache.size}`);
      console.log (`Prefix             : ?`);
      console.log (`Durum              : Bot Ã‡evrimiÃ§i!`);
      console.log ('_________________________________________');
    
  });


  module.exports = {
    kod: "mute",
    async (message, args){
        const target = message.mentions.users.firts();
        if(target){
            let mainRole = message.guild.roles.cache.find(role => role.name === 'member');
            let mainRole = message.guild.roles.cache.find(role => role.name === 'mute');

            let memberTarget = message.guild.members.cache.get(target.id);

            memberTarget.roles.remove(mainRole.id);
            memberTarget.roles.add(mainRole.id);
            message.channel.send(`${memberTarget.user.id}> KiÅŸi mutelenmiÅŸtir`);
        } else {
       message.channel.send('KiÅŸiyi muteleyemem')
        }

        }
    }



    module.exports = {
    kod: "reklam-engel",
    async run (client, message, args) {
        const { MessageEmbed } = require("discord.js")
        const db = require('quick.db')
        if (!message.member.hasPermission('ADMINISTRATOR')) return message.reply('**REKLAM ENGEL** AÃ§mak iÃ§in yÃ¶netici olmalÄ±sÄ±nÄ±z.');
        if (!args[0]) return message.channel.send("Litfen `aÃ§` ya da `kapat` yazÄ±nÄ±z.")
        let ayar = args[0].toLowerCase()
        if (ayar === "aÃ§") {
            db.set("reklam" + message.guild.id, "aÃ§Ä±k")
            const embed = new MessageEmbed()
            .setTitle("Reklam Engel AyarÄ± DeÄŸiÅŸtirildi")
            .setDescription("BaÅŸarÄ±yla `Reklam Engel AÃ§Ä±ldÄ±`")
            .setColor("GREEN")
        } else if (ayar ===  "kapat") {
            if (!db.has("reklam" + message.guild.id)) return message.reply("Reklam engel kodunu kapatmak iÃ§in aÃ§manÄ±z gerekir")
            db.delete("reklam" + message.guild.id)
            const embed = new MessageEmbed()
            .setTitle("Reklam Engel AyarÄ± DeÄŸiÅŸtirildi")
            .setDescription("BaÅŸarÄ±yla `Reklam Engel KapatÄ±ldÄ±`")
            .setColor("RED")
        }else {
            message.reply("LÃ¼tfen `aÃ§` veya `kapat` yazÄ±nÄ±z")

        }
    }
}